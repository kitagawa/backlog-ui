- # encoding: UTF-8
- require './haml_helper'

- require 'sinatra/r18n'
- R18n::I18n.default = 'ja'
- t = R18n::I18n.new('ja','i18n').t

%div{class: "container-fluid"}
	%div{class: "row"}
		%div{class: "col-md-2"}
			%div{class: "well"}
				%center
					%button{:class => "btn btn-primary btn-save", "ng-click" => "update()"}
						%span{class: "fa fa-save"}
						=t.button.save
		%div{class: "col-md-10"}
			%div{class: "well"}
				= HamlHelper.render "shared/mode_tab"
				%div{"ng-repeat" => "version in versions", :class=>"ticket-list"}
					%div{:class=>"list-header"}
						{{versions[$index].name}}
					%div{:class=>"list-body"}
						%ul{"ui-sortable"=>"sortable_options", "ng-model"=>"version.issues", :class=>"row"}
							%li{"ng-repeat" => "issue in version.issues"}
								%div{:class=>"ticket"}
									%div{class: "float-left ticket-icon"}
										%img{"ng-src" => "/icon?id={{issue.assignee.id}}", class: "icon"}
										%div{class: "ticket-user"}
											{{issue.assignee.name}}
									%div{class: "float-left ticket-body"}
										%div{class: "ticket-key"}
											%a{href: "/url/{{issue.issueKey}}", target: "window"}
												{{issue.issueKey}}
										%div{class: "ticket-title"}
											{{issue.summary}}
										%div{class: "ticket-status ticket-status-{{issue.status.id}}"}
											{{issue.status.name}}
									%div{class: "clear"}	
				%div{:style=>"clear:both"}